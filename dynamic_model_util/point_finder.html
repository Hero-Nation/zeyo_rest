<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Point Finder</title>
<script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<script src="svg.js"></script>
<script></script>
<style>
#canvas {
	width: 900px;
	height: 900px;
	border: 1px solid black;
}
</style>
</head>
<body>
<h3>포인트 찾기</h3>
 <table id="maintable">
  <tr>
   <td>
    <div id="controller_panel">
     <button id="btn_fourth_back">&nbsp;<<<<&nbsp;</button>
     <button id="btn_third_back">&nbsp;<<<&nbsp;</button>
     <button id="btn_double_back">&nbsp;<<&nbsp;</button>
     <button id="btn_back">&nbsp;<&nbsp;</button>
     <button id="btn_forth">&nbsp;>&nbsp;</button>
     <button id="btn_double_forth">&nbsp;>>&nbsp;</button>
     <button id="btn_third_forth">&nbsp;>>>&nbsp;</button>
     <button id="btn_fourth_forth">&nbsp;>>>>&nbsp;</button>
    </div>
    <div>
     TARGET ID : <input type="text" id="target_id" />
     <button id="btn_get_target">가지고오기</button>
     X : <input type="text" id="x_point" /> Y : <input type="text" id="y_point" />
    </div>
    <div id="canvas"></div>
   </td>
   <td><textarea id="svg_tag_editor" cols="135" rows="60"></textarea></td>
  </tr>
 </table> 
</body>
<script>
	var draw = SVG('canvas');
	var rect = null;
	var target = null;
	var length = null;

	$("#btn_get_target").bind("click", function() {
		draw.svg("");
		var svg_tag = $("#svg_tag_editor").val();
		var this_svg = draw.svg(svg_tag);
		var target_id_val = $("#target_id").val();
		rect = SVG.get("marker");
		target = SVG.get(target_id_val);
		length = target.length();
		cursor = 0;

	});

	var cursor = 0;
	var constants_fourth = 0.1;
	var constants_third = 0.01;
	var constants_double = 0.001;
	var constants = 0.0001;

	var move_rect = function(p_step) {
		
		cursor += p_step;
		var p = target.pointAt(cursor * length);
		
		rect.center(p.x, p.y);

		$("#x_point").val(p.x);
		$("#y_point").val(p.y);

	};

	$("#btn_fourth_back").bind("click", function() {
		move_rect(-constants_fourth);
	});

	$("#btn_third_back").bind("click", function() {
		move_rect(-constants_third);
	});

	$("#btn_double_back").bind("click", function() {
		move_rect(-constants_double);
	});
	$("#btn_back").bind("click", function() {
		move_rect(-constants);
	});

	$("#btn_forth").bind("click", function() {
		move_rect(constants);
	});
	$("#btn_double_forth").bind("click", function() {
		move_rect(constants_double);
	});
	$("#btn_third_forth").bind("click", function() {
		move_rect(constants_third);
	});

	$("#btn_fourth_forth").bind("click", function() {
		move_rect(constants_fourth);
	});
</script>
</html>